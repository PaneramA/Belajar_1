<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metabase API Demo</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/business-overview.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/chat.css">
    <link rel="stylesheet" href="css/chart-switcher.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="url(#gradient)" />
                    <path d="M16 8L24 12V20L16 24L8 20V12L16 8Z" fill="white" opacity="0.9" />
                    <defs>
                        <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#667eea" />
                            <stop offset="100%" stop-color="#764ba2" />
                        </linearGradient>
                    </defs>
                </svg>
                <h1>Metabase API Demo</h1>
            </div>
            <div class="status" id="connectionStatus">
                <span class="status-dot disconnected"></span>
                <span class="status-text">Disconnected</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Auth Section -->
            <section class="card login-section" id="authSection">
                <div class="auth-tabs">
                    <button class="auth-tab active" data-auth-tab="login">Login</button>
                    <button class="auth-tab" data-auth-tab="register">Register</button>
                </div>

                <!-- Login Form -->
                <div class="auth-form active" id="loginForm">
                    <div class="card-header">
                        <h2>üîê Login ke Dashboard</h2>
                        <p>Masukkan kredensial Anda untuk masuk</p>
                    </div>
                    <div class="card-body">
                        <form id="loginFormSubmit">
                            <div class="form-group">
                                <label for="loginEmail">Email</label>
                                <input type="email" id="loginEmail" placeholder="your-email@example.com" required>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            </div>
                            <div class="form-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="rememberMe">
                                    <span>Remember me</span>
                                </label>
                                <a href="#" class="link-text" onclick="showDemoMode(); return false;">Try Demo Mode</a>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-text">Login</span>
                                <span class="btn-loader" style="display: none;">
                                    <div class="spinner"></div>
                                </span>
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Register Form -->
                <div class="auth-form" id="registerForm">
                    <div class="card-header">
                        <h2>üìù Buat Akun Baru</h2>
                        <p>Daftar untuk mengakses dashboard</p>
                    </div>
                    <div class="card-body">
                        <form id="registerFormSubmit">
                            <div class="form-group">
                                <label for="registerName">Nama Lengkap</label>
                                <input type="text" id="registerName" placeholder="John Doe" required>
                            </div>
                            <div class="form-group">
                                <label for="registerEmail">Email</label>
                                <input type="email" id="registerEmail" placeholder="your-email@example.com" required>
                            </div>
                            <div class="form-group">
                                <label for="registerPassword">Password</label>
                                <input type="password" id="registerPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required
                                    minlength="6">
                                <small class="form-hint">Minimal 6 karakter</small>
                            </div>
                            <div class="form-group">
                                <label for="registerConfirmPassword">Konfirmasi Password</label>
                                <input type="password" id="registerConfirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            </div>
                            <div class="form-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="agreeTerms" required>
                                    <span>Saya setuju dengan syarat dan ketentuan</span>
                                </label>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-text">Register</span>
                                <span class="btn-loader" style="display: none;">
                                    <div class="spinner"></div>
                                </span>
                            </button>
                        </form>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section (Hidden by default) -->
            <section class="dashboard-section" id="dashboardSection" style="display: none;">
                <!-- Business Overview Dashboard -->
                <div class="business-dashboard-grid">
                    <!-- Total Orders by Product Category -->
                    <div class="dashboard-card">
                        <div class="card-header-simple">
                            <h3>Total orders by product category</h3>
                            <button class="btn-icon">‚ãØ</button>
                        </div>
                        <div class="card-body">
                            <canvas id="ordersDonutChart"></canvas>
                            <div class="chart-legend" id="ordersLegend"></div>
                        </div>
                    </div>

                    <!-- Revenue per Quarter -->
                    <div class="dashboard-card">
                        <div class="card-header-simple">
                            <h3>Revenue per quarter</h3>
                            <button class="btn-icon">‚ãØ</button>
                        </div>
                        <div class="card-body center">
                            <div class="metric-large">
                                <div class="metric-value">$141.9k</div>
                                <div class="metric-label">Q4 2025</div>
                                <div class="metric-change negative">‚Üì 0.95% vs. previous quarter</div>
                            </div>
                        </div>
                    </div>

                    <!-- Revenue Goal -->
                    <div class="dashboard-card">
                        <div class="card-header-simple">
                            <h3>Revenue goal for this quarter</h3>
                            <button class="btn-icon">‚ãØ</button>
                        </div>
                        <div class="card-body">
                            <div class="goal-label">USD 145,337</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="goal-range">
                                <span>0</span>
                                <span>Goal USD 250,000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Revenue by State -->
                    <div class="dashboard-card">
                        <div class="card-header-simple">
                            <h3>Revenue by state</h3>
                            <button class="btn-icon">‚ãØ</button>
                        </div>
                        <div class="card-body">
                            <div class="map-placeholder">
                                <div class="map-legend">
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #e3f2fd"></span>
                                        <span>$1.4k - $12.4k</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #90caf9"></span>
                                        <span>$16.8k - $27.2k</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #42a5f5"></span>
                                        <span>$30.0k - $42.6k</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #1e88e5"></span>
                                        <span>$64.7k - $66.6k</span>
                                    </div>
                                    <div class="legend-item">
                                        <span class="legend-color" style="background: #1565c0"></span>
                                        <span>$108.5k +</span>
                                    </div>
                                </div>
                                <div class="map-visual">üó∫Ô∏è US Map Visualization</div>
                            </div>
                        </div>
                    </div>

                    <!-- Average Product Rating -->
                    <div class="dashboard-card small">
                        <div class="card-header-simple">
                            <h3>Average product rating</h3>
                            <button class="btn-icon">‚ãØ</button>
                        </div>
                        <div class="card-body center">
                            <canvas id="ratingGaugeChart"></canvas>
                        </div>
                    </div>

                    <!-- Revenue and Orders Over Time -->
                    <div class="dashboard-card wide" id="revenueTimeCardContainer">
                        <div class="card-header-simple">
                            <h3>Revenue and orders over time</h3>
                            <button class="btn-icon">‚ãØ</button>
                        </div>
                        <div class="card-body">
                            <canvas id="revenueTimeChart"></canvas>
                        </div>
                    </div>

                    <!-- Revenue by Product Category -->
                    <div class="dashboard-card" id="revenueProductCategoryCard">
                        <div class="card-body">
                            <canvas id="revenueBarChart"></canvas>
                        </div>
                    </div>

                    <!-- Orders by Product Category (Pie/Doughnut) -->
                    <div class="dashboard-card" id="ordersProductCategoryCard">
                        <div class="card-body">
                            <canvas id="ordersDonutChart"></canvas>
                        </div>
                        <div class="legend" id="ordersLegend"></div>
                    </div>

                    <!-- Orders Over Time -->
                    <div class="dashboard-card" id="ordersTimeCard">
                        <div class="card-body">
                            <canvas id="ordersLineChart"></canvas>
                        </div>
                    </div>

                    <!-- Events by Quarter -->
                    <tr>
                        <th>Account ‚Üí Plan</th>
                        <th>Event</th>
                        <th>Q1</th>
                        <th>Q2</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge">Basic</span></td>
                            <td>Button Clicked</td>
                            <td>785</td>
                            <td class="positive">9</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>Page Viewed</td>
                            <td>5,006</td>
                            <td class="positive">6</td>
                        </tr>
                        <tr>
                            <td colspan="2"><strong>Totals for Basic</strong></td>
                            <td><strong>5,791</strong></td>
                            <td><strong>28</strong></td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-blue">Business</span></td>
                            <td>Button Clicked</td>
                            <td>4</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>Page Viewed</td>
                            <td>9</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td colspan="2"><strong>Totals for Business</strong></td>
                            <td><strong>13</strong></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td><span class="badge badge-purple">Premium</span></td>
                            <td>Button Clicked</td>
                            <td>35</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>Page Viewed</td>
                            <td>279</td>
                            <td class="positive">2</td>
                        </tr>
                        <tr>
                            <td colspan="2"><strong>Totals for Premium</strong></td>
                            <td><strong>314</strong></td>
                            <td><strong>2</strong></td>
                        </tr>
                        <tr class="total-row">
                            <td colspan="2"><strong>Grand totals</strong></td>
                            <td><strong>6,118</strong></td>
                            <td><strong>31</strong></td>
                        </tr>
                    </tbody>
                    </table>
                </div>
    </div>
    </div>
    </div>

    <!-- Logout Button -->
    <div class="logout-section">
        <button class="btn btn-danger" onclick="logout()">
            üö™ Logout
        </button>
    </div>
    </section>
    </main>

    <!-- AI Chat Assistant -->
    <button class="chat-button" id="chatButton" title="Chat with AI">
        üí¨
    </button>

    <div class="chat-panel" id="chatPanel">
        <div class="chat-header">
            <div class="chat-header-title">
                <span class="chat-header-icon">ü§ñ</span>
                <h3>AI Assistant</h3>
            </div>
            <div class="chat-header-actions">
                <button class="chat-header-btn" onclick="clearChat()" title="Clear chat">
                    üóëÔ∏è
                </button>
                <button class="chat-header-btn" onclick="showApiKeyPrompt()" title="API Settings">
                    ‚öôÔ∏è
                </button>
                <button class="chat-header-btn" onclick="closeChat()" title="Close">
                    ‚úï
                </button>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <!-- Messages will be added here dynamically -->
        </div>

        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <textarea class="chat-input" id="chatInput" placeholder="Tanyakan tentang data Anda..."
                    rows="1"></textarea>
                <button class="chat-send-btn" id="chatSendBtn">
                    ‚û§
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>
    </div>

    <script src="js/metabase-api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
    <script src="js/chart-renderers.js"></script>
    <script src="js/chart-switcher.js"></script>
    <script src="js/business-overview.js"></script>
    <script src="js/ai-chat.js"></script>
</body>

</html>